version: "1.0.0"
resourceDefinitions:
  - type: aws/iam/role
    label: AWS IAM Role
    requiredFields:
      - assumeRolePolicyDocument
    computedFields:
      - arn
      - roleId
    operations:
      create:
        - CreateRole
        - PutRolePolicy
        - AttachRolePolicy
        - PutRolePermissionsBoundary
      update:
        - UpdateRole
        - PutRolePolicy
        - DeleteRolePolicy
        - AttachRolePolicy
        - DetachRolePolicy
        - PutRolePermissionsBoundary
      destroy:
        - DetachRolePolicy
        - DeleteRolePolicy
        - DeleteRole
        - DeleteRolePermissionsBoundary
      tags:
        saveTags: TagRole
        removeTags: UntagRole
    docLinks:
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_CreateRole.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_UpdateRole.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_DeleteRole.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_PutRolePolicy.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_AttachRolePolicy.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_DetachRolePolicy.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_PutRolePermissionsBoundary.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_DeleteRolePermissionsBoundary.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_TagRole.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_UntagRole.html
      - https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-iam-role.html
    propertyDocLinks:
      assumeRolePolicyDocument: https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#access_policies-json
      policies: https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-properties-iam-role-policy.html
      tags: https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-properties-iam-role-tag.html
  - type: aws/iam/user
    label: AWS IAM User
    requiredFields: []
    computedFields:
      - arn
      - userId
    operations:
      create:
        - CreateUser
        - CreateLoginProfile
        - PutUserPolicy
        - AttachUserPolicy
        - PutUserPermissionsBoundary
        - AddUserToGroup
      update:
        - UpdateUser
        - CreateLoginProfile
        - UpdateLoginProfile
        - DeleteLoginProfile
        - PutUserPolicy
        - DeleteUserPolicy
        - AttachUserPolicy
        - DetachUserPolicy
        - PutUserPermissionsBoundary
        - DeleteUserPermissionsBoundary
      destroy:
        - DetachUserPolicy
        - DeleteUserPolicy
        - DeleteLoginProfile
        - DeleteUserPermissionsBoundary
        - DeleteUser
      tags:
        saveTags: TagUser
        removeTags: UntagUser
    docLinks:
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_CreateUser.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_UpdateUser.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_DeleteUser.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_PutUserPolicy.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_AttachUserPolicy.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_DetachUserPolicy.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_CreateLoginProfile.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_UpdateLoginProfile.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_DeleteLoginProfile.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_PutUserPermissionsBoundary.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_DeleteUserPermissionsBoundary.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_AddUserToGroup.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_TagUser.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_UntagUser.html
      - https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-iam-user.html
    propertyDocLinks:
      assumeRolePolicyDocument: https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#access_policies-json
      loginProfile: https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-properties-iam-user-loginprofile.html
      policies: https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-properties-iam-user-policy.html
      tags: https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-properties-iam-user-tag.html
  - type: aws/iam/group
    label: AWS IAM Group
    requiredFields: []
    computedFields:
      - arn
      - groupId
    operations:
      create:
        - CreateGroup
        - PutGroupPolicy
        - AttachGroupPolicy
      update:
        - UpdateGroup
        - PutGroupPolicy
        - DeleteGroupPolicy
        - AttachGroupPolicy
        - DetachGroupPolicy
      destroy:
        - DetachGroupPolicy
        - DeleteGroupPolicy
        - DeleteGroup
    docLinks:
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_CreateGroup.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_UpdateGroup.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_DeleteGroup.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_PutGroupPolicy.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_DeleteGroupPolicy.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_AttachGroupPolicy.html
      - https://docs.aws.amazon.com/IAM/latest/APIReference/API_DetachGroupPolicy.html
      - https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-iam-group.html
    propertyDocLinks:
      policies: https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-properties-iam-group-policy.html
    notes: |
      IAM groups do not support tags.